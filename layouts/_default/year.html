{{ define "main" }}
<div class="archive-page">
    <h1 class="mb-4">{{ .Title }}</h1>
    
    <div class="posts-list">
        {{ $year := .Title }}
        {{ $posts := where .Site.RegularPages "Type" "posts" }}
        {{ $yearPosts := where $posts ".Date.Year" "eq" (int $year) }}
        
        {{ $paginator := .Paginate $yearPosts }}
        {{ range $paginator.Pages }}
            <article class="blog-post mb-4">
                <h3 class="post-title">
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                </h3>
                
                <div class="post-meta">
                    <span class="meta-item">
                        <i class="bi bi-calendar"></i>
                        <time datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format (.Site.Params.dateFormat | default "January 2, 2006") }}
                        </time>
                    </span>
                    
                    {{ if .Params.author }}
                    <span class="meta-item">
                        <i class="bi bi-person"></i>
                        {{ .Params.author }}
                    </span>
                    {{ else if .Site.Params.author.name }}
                    <span class="meta-item">
                        <i class="bi bi-person"></i>
                        {{ .Site.Params.author.name }}
                    </span>
                    {{ end }}
                    
                    {{ if .Params.categories }}
                    <span class="meta-item">
                        <i class="bi bi-folder"></i>
                        {{ range $i, $cat := .Params.categories }}
                            {{- if $i }}, {{ end -}}
                            <a href="{{ "categories/" | relLangURL }}{{ . | urlize }}">{{ . }}</a>
                        {{- end }}
                    </span>
                    {{ end }}
                </div>
                
                <div class="post-summary">
                    {{ .Summary | plainify | truncate 200 }}
                </div>
                
                <a href="{{ .RelPermalink }}" class="read-more">
                    {{ i18n "readMore" | default "Read more" }} <i class="bi bi-arrow-right"></i>
                </a>
            </article>
        {{ end }}
    </div>
    
    {{ if gt $paginator.TotalPages 1 }}
    <nav aria-label="{{ i18n "pagination" | default "Pagination" }}">
        <ul class="pagination justify-content-center">
            {{ template "_internal/pagination.html" . }}
        </ul>
    </nav>
    {{ end }}
</div>
{{ end }}